<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PokeKotlin JS</title>
  <link rel="stylesheet" href="assets/style/style.css">
  <link rel="icon" href="assets/img/pokeball.png" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">


</head>

<body>
  <header>
    <div class="header game-font">
      <img draggable="false" src="assets/img/pokeball-dash.png" alt="Icone Pokebola">

      <span> PokeKotlin JS   <i class="fa fa-sync"></i></span>
    </div>
  </header>

  <div id="loader" class="loader">
    <svg class="spinner" width="66px" height="66px" stroke-width="5" viewBox="0 0 66 66">
      <circle cx="33" cy="33" r="25"></circle>
    </svg>
  </div>

  <main style="width: 100%; display: flex; justify-content: center;">
    <div id="pokedex">
      <div id="left-panel">
        <div class="left-top-container">
          <div class="lights-container">
            <div class="big-light-boarder">
              <div class="big-light blue">
                <div class="big-dot light-blue"></div>
              </div>
            </div>
            <div class="small-lights-container">
              <div class="small-light red">
                <div class="dot light-red"></div>
              </div>
              <div class="small-light yellow">
                <div class="dot light-yellow"></div>
              </div>
              <div class="small-light green">
                <div class="dot light-green"></div>
              </div>
            </div>
          </div>
        </div>


        <!-- Center Screen -->
        <div class="screen-container">
          <div class="screen">
            <div class="top-screen-lights">
              <div class="mini-light red"></div>
              <div class="mini-light red"></div>
            </div>
            <div id="main-screen">
              <div id="content" class="main-screen-content main-screen-content-children"></div>
              <div id="myModal" class="modal">

                <div id="wrapper">
                  <div id="sliderContainer">

                    <div class="tick-slider">
                      <div class="tick-slider-header">
                        <h5><label for="sizeSlider">Total size</label></h5>
                        <h5>cm</h5>
                      </div>
                      <div class="tick-slider-value-container">
                        <div id="sizeLabelMin" class="tick-slider-label">0</div>
                        <div id="sizeLabelMax" class="tick-slider-label">300</div>
                        <div id="sizeValue" class="tick-slider-value"></div>
                      </div>
                      <div class="tick-slider-background"></div>
                      <div id="sizeProgress" class="tick-slider-progress"></div>
                      <div id="sizeTicks" class="tick-slider-tick-container"></div>
                      <input id="sizeSlider" class="tick-slider-input" type="range" min="0" max="300" step="25"
                        value="150" data-tick-step="25" data-tick-id="sizeTicks" data-value-id="sizeValue"
                        data-progress-id="sizeProgress" data-handle-size="18" data-min-label-id="sizeLabelMin"
                        data-max-label-id="sizeLabelMax" />
                    </div>
                  </div>
                </div>

              </div>
            </div>
            <div class="bottom-screen-lights">
              <div class="small-light red" style="position: relative;">
                <button id="randomizeButton" title="Aleatório" class="random-button"><i
                    class="fa fa-lg fa-random"></i></button>
                <!-- <div class="dot light-red"> -->
                <!-- </div> -->
              </div>
              <div class="burger">
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="buttons-container">
          <div class="upper-buttons-container">
            <button class="big-button" id="searchGeneratioButton"><i class="fa fa-search"></i></button>
            <div class="long-buttons-container">
              <div class="game-font long-button red" style="position: relative;">
                <span style="position: absolute; top: -20px; left: 2px;"> Nome ou número </span>
                <input type="search" name="pokemonById" class="game-font" id="pokemonById">
              </div>
              <div id="selectScreen" class="game-font long-button light-blue">Por geração</div>
            </div>
          </div>
          <div class="nav-buttons-container">
            <div class="dots-container"></div>
            <div class="green-screen">
              <select aria-label="selectGeneration" style="padding: 0 1em" class="game-font" id="selectGeneration">
              </select>
            </div>
            <div class="right-nav-container">
              <div class="nav-button">
                <div class="nav-center-circle"></div>
                <div class="nav-button-vertical">
                  <button class="arrow-button" title="Ordenar ascendente" id="ascButton"><i
                      class="fa fa-arrow-left"></i></button>
                  <button class="arrow-button" title="Ordenar descendente" id="descButton"><i
                      class="fa fa-arrow-right"></i></button>
                </div>
                <div class="nav-button-horizontal">
                  <div class="border-top"></div>
                  <div style="display: flex; justify-content: space-between;">
                    <button class="arrow-button" title="Escolher por geração" id="generationButton"><i
                        class="fa fa-arrow-left"></i></button>
                    <button class="arrow-button" title="Escolher por tipo" id="typeButton"><i
                        class="fa fa-arrow-right"></i></button>
                  </div>
                  <div class="border-bottom"></div>
                </div>
              </div>
              <div class="bottom-right-nav-container">
                <div class="small-light red">
                  <div class="dot light-red"></div>
                </div>
                <div class="dots-container"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    function changeListShowed(algo) {
      console.log(typeof algo)
      console.log(algo.value)

    }

    function init() {
      const sliders = document.getElementsByClassName("tick-slider-input");

      for (let slider of sliders) {
        slider.oninput = onSliderInput;

        updateValue(slider);
        updateValuePosition(slider);
        updateLabels(slider);
        updateProgress(slider);

        setTicks(slider);
      }
    }

    function onSliderInput(event) {
      updateValue(event.target);
      updateValuePosition(event.target);
      updateLabels(event.target);
      updateProgress(event.target);
    }

    function updateValue(slider) {
      let value = document.getElementById(slider.dataset.valueId);

      value.innerHTML = "<div>" + "aaaaa" + slider.value + "</div>";
    }

    function updateValuePosition(slider) {
      let value = document.getElementById(slider.dataset.valueId);

      const percent = getSliderPercent(slider);

      const sliderWidth = slider.getBoundingClientRect().width;
      const valueWidth = value.getBoundingClientRect().width;
      const handleSize = slider.dataset.handleSize;

      let left = percent * (sliderWidth - handleSize) + handleSize / 2 - valueWidth / 2;

      left = Math.min(left, sliderWidth - valueWidth);
      left = slider.value === slider.min ? 0 : left;

      value.style.left = left + "px";
    }

    function updateLabels(slider) {
      const value = document.getElementById(slider.dataset.valueId);
      const minLabel = document.getElementById(slider.dataset.minLabelId);
      const maxLabel = document.getElementById(slider.dataset.maxLabelId);

      const valueRect = value.getBoundingClientRect();
      const minLabelRect = minLabel.getBoundingClientRect();
      const maxLabelRect = maxLabel.getBoundingClientRect();

      const minLabelDelta = valueRect.left - (minLabelRect.left);
      const maxLabelDelta = maxLabelRect.left - valueRect.left;

      const deltaThreshold = 32;

      if (minLabelDelta < deltaThreshold) minLabel.classList.add("hidden");
      else minLabel.classList.remove("hidden");

      if (maxLabelDelta < deltaThreshold) maxLabel.classList.add("hidden");
      else maxLabel.classList.remove("hidden");
    }

    function updateProgress(slider) {
      let progress = document.getElementById(slider.dataset.progressId);
      const percent = getSliderPercent(slider);

      progress.style.width = percent * 100 + "%";
    }

    function getSliderPercent(slider) {
      const range = slider.max - slider.min;
      const absValue = slider.value - slider.min;

      return absValue / range;
    }

    function setTicks(slider) {
      let container = document.getElementById(slider.dataset.tickId);
      const spacing = parseFloat(slider.dataset.tickStep);
      const sliderRange = slider.max - slider.min;
      const tickCount = sliderRange / spacing + 1; // +1 to account for 0

      for (let ii = 0; ii < tickCount; ii++) {
        let tick = document.createElement("span");

        tick.className = "tick-slider-tick";

        container.appendChild(tick);
      }
    }

    function onResize() {
      const sliders = document.getElementsByClassName("tick-slider-input");

      for (let slider of sliders) {
        updateValuePosition(slider);
      }
    }

    window.onload = init;
    window.addEventListener("resize", onResize);
  </script>

  <script src="js/kotlin.js"></script>
  <script src="js/main.js"></script>
</body>

</html>